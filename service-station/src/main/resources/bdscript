create schema if not exists car_service_station;
 use car_service_station;

 create table if not exists role
 (
     id   int auto_increment primary key,
     name varchar(25) not null
 );

 create table if not exists status
 (
     id   int auto_increment primary key,
     name varchar(25) not null
 );

 create table if not exists users
 (
     id           int auto_increment primary key,
     first_name   varchar(25) not null,
     last_name    varchar(25) not null,
     login        varchar(25) not null unique,
     password     varchar(55) not null,
     email        varchar(55) not null unique,
     phone_number int         not null,
     role_id      int         not null,
     foreign key (role_id) references roles (id)
 );

 create table if not exists cars
 (
     id      int auto_increment primary key,
     VIN     char(17)    not null,
     brand   varchar(15) not null,
     model   varchar(25) not null,
     year    date,
     user_id int         not null,
     foreign key (user_id) references users (id)
 );

 create table if not exists workers
 (
     id         int auto_increment primary key,
     position   varchar(25),
     first_name varchar(25) not null,
     last_name  varchar(25) not null
 );

 create table if not exists spare_part_price
 (
     id          int auto_increment primary key,
     brand       varchar(25) not null,
     vendor_code varchar(55),
     price       decimal     not null,
     discount    float
 );

 create table if not exists work_price
 (
     id       int auto_increment primary key,
     name     varchar(255),
     price    decimal not null,
     discount float
 );

 create table if not exists work_order
 (
     id         int auto_increment primary key,
     car_id     int not null,
     start_time date,
     end_time   date,
     status_id  int not null,
     worker_id  int,
     foreign key (car_id) references cars (id),
     foreign key (status_id) references status (id),
     foreign key (worker_id) references workers (id)
 );

 create table if not exists total_price
 (
     work_order_id       int not null,
     work_price_id       int not null,
     spare_part_price_id int not null,
     foreign key (work_order_id) references work_orders (id),
     foreign key (work_price_id) references work_price (id),
     foreign key (spare_part_price_id) references spare_part_price (id)
 );
